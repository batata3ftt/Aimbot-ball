-- Aimbot Ball Script OTIMIZADO - Roblox
-- Compat√≠vel com Delta Executor (Mobile)
-- SEM LAG | SEM AFETAR SPEED

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera

local Config = {
    Enabled = true,
    MaxDistance = math.huge, -- Sem limite de dist√¢ncia
    Prediction = 0.13,
    MinVelocity = 0.5, -- S√≥ mira em bolas que est√£o se movendo
}

local currentTarget = nil
local ballCache = {}
local cacheTime = 0
local CACHE_DURATION = 0.5

-- Encontra a bola REAL (que est√° se movendo)
local function GetClosestBall()
    local currentTime = tick()
    
    -- Valida se o target atual ainda √© v√°lido
    if currentTime - cacheTime < CACHE_DURATION and currentTarget and currentTarget.Parent then
        local velocity = currentTarget.AssemblyLinearVelocity or currentTarget.Velocity or Vector3.new(0, 0, 0)
        if velocity.Magnitude >= Config.MinVelocity then
            return currentTarget
        end
    end
    
    local closestBall = nil
    local shortestDistance = Config.MaxDistance
    
    local character = LocalPlayer.Character
    if not character then return nil end
    
    local rootPart = character:FindFirstChild("HumanoidRootPart")
    if not rootPart then return nil end
    
    -- Fun√ß√£o para verificar se √© uma bola v√°lida
    local function isValidBall(obj)
        if not obj:IsA("BasePart") then return false end
        
        -- Verifica o nome
        local name = obj.Name:lower()
        if not (name == "ball" or name:find("ball") or name:find("football") or name:find("soccer")) then
            return false
        end
        
        -- Verifica se est√° se movendo (bola real)
        local velocity = obj.AssemblyLinearVelocity or obj.Velocity or Vector3.new(0, 0, 0)
        if velocity.Magnitude < Config.MinVelocity then
            return false -- Ignora bolas paradas (fantasmas)
        end
        
        -- Verifica se tem f√≠sica (CanCollide ou n√£o ancorado)
        if obj.Anchored then
            return false -- Ignora bolas ancoradas (decora√ß√£o)
        end
        
        return true
    end
    
    -- Busca em workspace direto
    for _, obj in pairs(workspace:GetChildren()) do
        if isValidBall(obj) then
            local distance = (obj.Position - rootPart.Position).Magnitude
            if distance < shortestDistance then
                closestBall = obj
                shortestDistance = distance
            end
        end
    end
    
    -- Busca em pastas e models
    if not closestBall then
        for _, folder in pairs(workspace:GetChildren()) do
            if folder:IsA("Folder") or folder:IsA("Model") then
                for _, obj in pairs(folder:GetDescendants()) do
                    if isValidBall(obj) then
                        local distance = (obj.Position - rootPart.Position).Magnitude
                        if distance < shortestDistance then
                            closestBall = obj
                            shortestDistance = distance
                        end
                    end
                end
            end
        end
    end
    
    cacheTime = currentTime
    return closestBall
end

-- Predi√ß√£o da bola
local function PredictPosition(ball)
    if ball and ball:IsA("BasePart") then
        local velocity = ball.AssemblyLinearVelocity or ball.Velocity or Vector3.new(0, 0, 0)
        return ball.Position + (velocity * Config.Prediction)
    end
    return ball.Position
end

-- AIMBOT OTIMIZADO - Mant√©m personagem e c√¢mera juntos
local function AimbotBall()
    if not Config.Enabled then return end
    
    local character = LocalPlayer.Character
    if not character then return end
    
    local rootPart = character:FindFirstChild("HumanoidRootPart")
    local humanoid = character:FindFirstChild("Humanoid")
    if not rootPart or not humanoid then return end
    
    local originalSpeed = humanoid.WalkSpeed
    
    currentTarget = GetClosestBall()
    
    if not currentTarget or not currentTarget.Parent then
        return
    end
    
    local predictedPos = PredictPosition(currentTarget)
    
    -- IMPORTANTE: Gira o personagem para a bola
    local direction = (predictedPos - rootPart.Position)
    local lookAtHorizontal = Vector3.new(direction.X, 0, direction.Z)
    
    if lookAtHorizontal.Magnitude > 0.1 then
        -- Mant√©m a posi√ß√£o Y do personagem, s√≥ gira no plano horizontal
        local targetCFrame = CFrame.new(rootPart.Position, rootPart.Position + lookAtHorizontal.Unit)
        rootPart.CFrame = targetCFrame
    end
    
    -- IMPORTANTE: C√¢mera acompanha o personagem E olha para a bola
    -- Mant√©m a c√¢mera atr√°s do personagem olhando para a bola
    local cameraOffset = rootPart.CFrame.LookVector * -5 + Vector3.new(0, 2, 0)
    local cameraPosition = rootPart.Position + cameraOffset
    
    -- Faz a c√¢mera olhar da posi√ß√£o do personagem para a bola
    Camera.CFrame = CFrame.new(cameraPosition, predictedPos)
    
    humanoid.WalkSpeed = originalSpeed
end

-- Conex√£o otimizada
local connection
connection = RunService.Heartbeat:Connect(function()
    if Config.Enabled then
        pcall(AimbotBall)
    end
end)

-- Interface
local ScreenGui = Instance.new("ScreenGui")
local Frame = Instance.new("Frame")
local UICorner = Instance.new("UICorner")
local FrameStroke = Instance.new("UIStroke")
local Title = Instance.new("TextLabel")
local TitleCorner = Instance.new("UICorner")
local TitleGlow = Instance.new("UIStroke")
local ToggleButton = Instance.new("TextButton")
local UICorner2 = Instance.new("UICorner")
local ButtonStroke = Instance.new("UIStroke")
local StatusLabel = Instance.new("TextLabel")
local FPSLabel = Instance.new("TextLabel")
local CloseButton = Instance.new("TextButton")
local CloseCorner = Instance.new("UICorner")

ScreenGui.Parent = game.CoreGui
ScreenGui.Name = "AimbotBallOPT"
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ScreenGui.ResetOnSpawn = false

Frame.Parent = ScreenGui
Frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
Frame.BorderSizePixel = 0
Frame.Position = UDim2.new(0.4, 0, 0.02, 0)
Frame.Size = UDim2.new(0, 200, 0, 110)
Frame.Active = true
Frame.Draggable = true

UICorner.CornerRadius = UDim.new(0, 20)
UICorner.Parent = Frame

FrameStroke.Parent = Frame
FrameStroke.Color = Color3.fromRGB(255, 0, 0)
FrameStroke.Thickness = 3
FrameStroke.Transparency = 0.3

Title.Parent = Frame
Title.BackgroundColor3 = Color3.fromRGB(10, 0, 0)
Title.BorderSizePixel = 0
Title.Size = UDim2.new(1, 0, 0, 32)
Title.Font = Enum.Font.SourceSansBold
Title.Text = "AIMBOT (BETA)"
Title.TextColor3 = Color3.fromRGB(255, 0, 0)
Title.TextSize = 18
Title.ClipsDescendants = true

TitleCorner.CornerRadius = UDim.new(0, 20)
TitleCorner.Parent = Title

TitleGlow.Parent = Title
TitleGlow.Color = Color3.fromRGB(255, 0, 0)
TitleGlow.Thickness = 2
TitleGlow.Transparency = 0.4

CloseButton.Parent = Frame
CloseButton.BackgroundColor3 = Color3.fromRGB(200, 0, 0)
CloseButton.BorderSizePixel = 0
CloseButton.Position = UDim2.new(0.85, 0, 0.06, 0)
CloseButton.Size = UDim2.new(0, 24, 0, 24)
CloseButton.Font = Enum.Font.SourceSansBold
CloseButton.Text = "X"
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.TextSize = 18

CloseCorner.CornerRadius = UDim.new(0.5, 0)
CloseCorner.Parent = CloseButton

ToggleButton.Parent = Frame
ToggleButton.BackgroundColor3 = Color3.fromRGB(50, 220, 50)
ToggleButton.BorderSizePixel = 0
ToggleButton.Position = UDim2.new(0.1, 0, 0.38, 0)
ToggleButton.Size = UDim2.new(0.8, 0, 0, 32)
ToggleButton.Font = Enum.Font.SourceSansBold
ToggleButton.Text = "‚óè ON"
ToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ToggleButton.TextSize = 16

UICorner2.CornerRadius = UDim.new(0, 12)
UICorner2.Parent = ToggleButton

ButtonStroke.Parent = ToggleButton
ButtonStroke.Color = Color3.fromRGB(255, 255, 255)
ButtonStroke.Thickness = 2
ButtonStroke.Transparency = 0.7

StatusLabel.Parent = Frame
StatusLabel.BackgroundTransparency = 1
StatusLabel.Position = UDim2.new(0, 0, 0.68, 0)
StatusLabel.Size = UDim2.new(1, 0, 0, 16)
StatusLabel.Font = Enum.Font.SourceSansBold
StatusLabel.Text = "‚îÅ‚îÅ ATIVO ‚îÅ‚îÅ"
StatusLabel.TextColor3 = Color3.fromRGB(50, 255, 150)
StatusLabel.TextSize = 12

FPSLabel.Parent = Frame
FPSLabel.BackgroundTransparency = 1
FPSLabel.Position = UDim2.new(0, 0, 0.85, 0)
FPSLabel.Size = UDim2.new(1, 0, 0, 14)
FPSLabel.Font = Enum.Font.SourceSans
FPSLabel.Text = "‚ö° FPS: --"
FPSLabel.TextColor3 = Color3.fromRGB(180, 180, 180)
FPSLabel.TextSize = 11

-- Monitor de FPS
local lastTime = tick()
local frameCount = 0
RunService.Heartbeat:Connect(function()
    frameCount = frameCount + 1
    local currentTime = tick()
    
    if currentTime - lastTime >= 1 then
        local fps = frameCount
        FPSLabel.Text = "‚ö° FPS: " .. fps
        
        if fps >= 50 then
            FPSLabel.TextColor3 = Color3.fromRGB(0, 255, 100)
        elseif fps >= 30 then
            FPSLabel.TextColor3 = Color3.fromRGB(255, 200, 0)
        else
            FPSLabel.TextColor3 = Color3.fromRGB(255, 50, 50)
        end
        
        frameCount = 0
        lastTime = currentTime
    end
end)

-- Efeito de PULSO VERMELHO no bot√£o
local function PulseEffect(button)
    local TweenService = game:GetService("TweenService")
    
    local pulseInfo = TweenInfo.new(0.15, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
    local pulseTween = TweenService:Create(button, pulseInfo, {
        BackgroundColor3 = Color3.fromRGB(255, 0, 0)
    })
    
    local scaleInfo = TweenInfo.new(0.1, Enum.EasingStyle.Elastic, Enum.EasingDirection.Out)
    local scaleTween = TweenService:Create(button, scaleInfo, {
        Size = UDim2.new(0.85, 0, 0, 36)
    })
    
    local glowInfo = TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
    local glowTween = TweenService:Create(ButtonStroke, glowInfo, {
        Thickness = 4,
        Transparency = 0.2,
        Color = Color3.fromRGB(255, 0, 0)
    })
    
    pulseTween:Play()
    scaleTween:Play()
    glowTween:Play()
    
    wait(0.15)
    
    local returnColor = Config.Enabled and Color3.fromRGB(50, 220, 50) or Color3.fromRGB(220, 50, 50)
    local returnInfo = TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
    
    local returnColorTween = TweenService:Create(button, returnInfo, {
        BackgroundColor3 = returnColor,
        Size = UDim2.new(0.8, 0, 0, 32)
    })
    
    local returnGlowTween = TweenService:Create(ButtonStroke, returnInfo, {
        Thickness = 2,
        Transparency = 0.7,
        Color = Color3.fromRGB(255, 255, 255)
    })
    
    returnColorTween:Play()
    returnGlowTween:Play()
end

-- Hover no bot√£o close
CloseButton.MouseEnter:Connect(function()
    local TweenService = game:GetService("TweenService")
    local hoverTween = TweenService:Create(CloseButton, TweenInfo.new(0.2), {
        BackgroundColor3 = Color3.fromRGB(255, 50, 50),
        Size = UDim2.new(0, 28, 0, 28)
    })
    hoverTween:Play()
end)

CloseButton.MouseLeave:Connect(function()
    local TweenService = game:GetService("TweenService")
    local leaveTween = TweenService:Create(CloseButton, TweenInfo.new(0.2), {
        BackgroundColor3 = Color3.fromRGB(200, 0, 0),
        Size = UDim2.new(0, 24, 0, 24)
    })
    leaveTween:Play()
end)

-- Anima√ß√£o na borda
spawn(function()
    local TweenService = game:GetService("TweenService")
    while wait(2) do
        local glowTween = TweenService:Create(FrameStroke, TweenInfo.new(1, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
            Transparency = 0.1,
            Thickness = 4
        })
        glowTween:Play()
        wait(1)
        local fadeGlow = TweenService:Create(FrameStroke, TweenInfo.new(1, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
            Transparency = 0.3,
            Thickness = 3
        })
        fadeGlow:Play()
    end
end)

-- Anima√ß√£o no t√≠tulo
spawn(function()
    local TweenService = game:GetService("TweenService")
    while wait(2) do
        local glowTween = TweenService:Create(TitleGlow, TweenInfo.new(1, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
            Transparency = 0.2
        })
        glowTween:Play()
        wait(1)
        local fadeGlow = TweenService:Create(TitleGlow, TweenInfo.new(1, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
            Transparency = 0.4
        })
        fadeGlow:Play()
    end
end)

-- Toggle com PULSO
ToggleButton.MouseButton1Click:Connect(function()
    Config.Enabled = not Config.Enabled
    
    PulseEffect(ToggleButton)
    
    wait(0.2)
    
    if Config.Enabled then
        ToggleButton.BackgroundColor3 = Color3.fromRGB(50, 220, 50)
        ToggleButton.Text = "‚óè ON"
        StatusLabel.Text = "‚îÅ‚îÅ ATIVO ‚îÅ‚îÅ"
        StatusLabel.TextColor3 = Color3.fromRGB(50, 255, 150)
    else
        ToggleButton.BackgroundColor3 = Color3.fromRGB(220, 50, 50)
        ToggleButton.Text = "‚óè OFF"
        StatusLabel.Text = "‚îÅ‚îÅ INATIVO ‚îÅ‚îÅ"
        StatusLabel.TextColor3 = Color3.fromRGB(255, 50, 50)
        currentTarget = nil
    end
end)

-- Fechar
CloseButton.MouseButton1Click:Connect(function()
    local TweenService = game:GetService("TweenService")
    
    local fadeOut = TweenService:Create(Frame, TweenInfo.new(0.3, Enum.EasingStyle.Back, Enum.EasingDirection.In), {
        Size = UDim2.new(0, 0, 0, 0),
        Position = UDim2.new(0.5, 0, 0.5, 0)
    })
    
    fadeOut:Play()
    
    wait(0.3)
    
    if connection then
        connection:Disconnect()
    end
    ScreenGui:Destroy()
end)

-- Prote√ß√£o de Speed
local function ProtectSpeed()
    local character = LocalPlayer.Character
    if character then
        local humanoid = character:FindFirstChild("Humanoid")
        if humanoid then
            humanoid:GetPropertyChangedSignal("WalkSpeed"):Connect(function()
                if Config.Enabled then
                    -- Monitora apenas
                end
            end)
        end
    end
end

LocalPlayer.CharacterAdded:Connect(ProtectSpeed)
if LocalPlayer.Character then
    ProtectSpeed()
end

print("‚úÖ AIMBOT (BETA) carregado!")
print("‚ö° Performance otimizada")
print("üéØ Tudo funcionando!")
